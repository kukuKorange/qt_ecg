# æ™ºèƒ½å¥åº·ç›‘æŠ¤ç³»ç»Ÿ (Smart Health Monitoring System)

åŸºäºQt5çš„è¿œç¨‹å¥åº·ç›‘æŠ¤æ¡Œé¢åº”ç”¨ï¼Œé€šè¿‡MQTTåè®®æ¥æ”¶ç”Ÿç†æ•°æ®ï¼Œæ”¯æŒå®æ—¶å¯è§†åŒ–ã€æ•°æ®å­˜å‚¨å’Œäº‘åŒæ­¥åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“¡ æ— çº¿æ•°æ®ä¼ è¾“
- æ”¯æŒMQTTåè®®æ¥æ”¶å¥åº·æ•°æ®
- å¯é…ç½®çš„MQTTæœåŠ¡å™¨è¿æ¥å‚æ•°
- è‡ªåŠ¨é‡è¿æœºåˆ¶
- æ”¯æŒå¤šä¸ªæ•°æ®ä¸»é¢˜è®¢é˜…

### ğŸ“Š å®æ—¶æ•°æ®ç›‘æµ‹
- **ä½“æ¸©ç›‘æµ‹**: å®æ—¶æ˜¾ç¤ºä½“æ¸©æ•°æ®ï¼Œæ”¯æŒÂ°Cå•ä½
- **å¿ƒç‡ç›‘æµ‹**: å®æ—¶æ˜¾ç¤ºå¿ƒç‡æ•°æ®ï¼Œæ”¯æŒbpmå•ä½  
- **è¡€æ°§ç›‘æµ‹**: å®æ—¶æ˜¾ç¤ºè¡€æ°§é¥±å’Œåº¦ç™¾åˆ†æ¯”
- **å¿ƒç”µå›¾æ˜¾ç¤º**: å®æ—¶ECGæ³¢å½¢ç»˜åˆ¶ï¼Œæ”¯æŒå¤šç§é‡‡æ ·ç‡

### ğŸ“ˆ æ•°æ®å¯è§†åŒ–
- å®æ—¶å¿ƒç”µå›¾æ³¢å½¢æ˜¾ç¤º
- ç”Ÿå‘½ä½“å¾è¶‹åŠ¿å›¾ï¼ˆä½“æ¸©ã€å¿ƒç‡ã€è¡€æ°§ï¼‰
- å¯è°ƒèŠ‚çš„æ—¶é—´èŒƒå›´æ˜¾ç¤º
- å†å²æ•°æ®å›æ”¾åŠŸèƒ½

### ğŸ’¾ æ•°æ®å­˜å‚¨
- SQLiteæœ¬åœ°æ•°æ®åº“å­˜å‚¨
- è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ¥æ”¶çš„æ•°æ®
- æ”¯æŒæ•°æ®å¯¼å‡ºï¼ˆCSVã€JSONæ ¼å¼ï¼‰
- æ•°æ®ä¿ç•™æœŸé™å¯é…ç½®

### ğŸ”” æ™ºèƒ½æŠ¥è­¦
- å¯é…ç½®çš„æŠ¥è­¦é˜ˆå€¼
- ä½“æ¸©è¿‡é«˜/è¿‡ä½æŠ¥è­¦
- å¿ƒç‡è¿‡å¿«/è¿‡æ…¢æŠ¥è­¦
- è¡€æ°§è¿‡ä½æŠ¥è­¦
- å£°éŸ³æŠ¥è­¦æç¤º

### â˜ï¸ äº‘åŒæ­¥
- æ”¯æŒäº‘ç«¯æ•°æ®åŒæ­¥
- å¯é…ç½®çš„APIæœåŠ¡å™¨
- è‡ªåŠ¨/æ‰‹åŠ¨åŒæ­¥æ¨¡å¼
- æ”¯æŒè¿œç¨‹æ•°æ®æŸ¥çœ‹

## ç¼–è¯‘è¦æ±‚

### ä¾èµ–é¡¹
- Qt 5.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- Qt Charts æ¨¡å—
- Qt Network æ¨¡å—
- Qt SQL æ¨¡å—
- Qt MQTT æ¨¡å—
- CMake 3.5 æˆ–æ›´é«˜ç‰ˆæœ¬
- C++17 å…¼å®¹çš„ç¼–è¯‘å™¨

### ç¼–è¯‘æ­¥éª¤

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir build
cd build

# é…ç½®é¡¹ç›®
cmake .. -DCMAKE_PREFIX_PATH=/path/to/qt

# ç¼–è¯‘
cmake --build . --config Release

# è¿è¡Œ
./qt_ecg
```

## MQTTæ•°æ®æ ¼å¼

### ä½“æ¸©æ•°æ® (health/temperature)
```json
{"value": 36.5}
```
æˆ–ç›´æ¥å‘é€æ•°å€¼ï¼š`36.5`

### å¿ƒç‡æ•°æ® (health/heartrate)
```json
{"value": 75}
```
æˆ–ç›´æ¥å‘é€æ•°å€¼ï¼š`75`

### è¡€æ°§æ•°æ® (health/spo2)
```json
{"value": 98}
```
æˆ–ç›´æ¥å‘é€æ•°å€¼ï¼š`98`

### å¿ƒç”µå›¾æ•°æ® (health/ecg)
```json
[0.1, 0.2, 0.5, 1.0, 0.3, -0.2, ...]
```
æˆ–ï¼š
```json
{"data": [0.1, 0.2, 0.5, 1.0, 0.3, -0.2, ...]}
```

### ç»¼åˆæ•°æ®åŒ… (health/vitals)
```json
{
    "timestamp": "2024-01-01T12:00:00",
    "temperature": 36.5,
    "heartRate": 75,
    "bloodOxygen": 98,
    "ecgData": [0.1, 0.2, ...]
}
```

## ä½¿ç”¨è¯´æ˜

### è¿æ¥MQTTæœåŠ¡å™¨
1. ç‚¹å‡»"è®¾ç½®"æŒ‰é’®é…ç½®MQTTæœåŠ¡å™¨åœ°å€å’Œç«¯å£
2. é…ç½®æ•°æ®è®¢é˜…ä¸»é¢˜
3. ç‚¹å‡»"è¿æ¥MQTT"æŒ‰é’®å»ºç«‹è¿æ¥

### æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•
- ç‚¹å‡»"æ¨¡æ‹Ÿæ•°æ®"æŒ‰é’®å¯ç”Ÿæˆæ¨¡æ‹Ÿçš„ç”Ÿç†æ•°æ®ï¼Œç”¨äºæµ‹è¯•å’Œæ¼”ç¤º

### æŸ¥çœ‹å†å²æ•°æ®
1. ç‚¹å‡»"å†å²æŸ¥è¯¢"æŒ‰é’®
2. é€‰æ‹©æ—¶é—´èŒƒå›´
3. æŸ¥çœ‹è¶‹åŠ¿å›¾å’Œè¯¦ç»†æ•°æ®è¡¨
4. å¯å¯¼å‡ºæ•°æ®ä¸ºCSVæˆ–JSONæ ¼å¼

### é…ç½®æŠ¥è­¦
1. è¿›å…¥è®¾ç½® -> æŠ¥è­¦è®¾ç½®
2. é…ç½®å„é¡¹ç”Ÿç†æŒ‡æ ‡çš„æŠ¥è­¦é˜ˆå€¼
3. å¯ç”¨/ç¦ç”¨å£°éŸ³æŠ¥è­¦

### äº‘åŒæ­¥é…ç½®
1. è¿›å…¥è®¾ç½® -> äº‘åŒæ­¥
2. è¾“å…¥äº‘æœåŠ¡å™¨URLå’ŒAPIå¯†é’¥
3. è®¾ç½®è®¾å¤‡IDå’ŒåŒæ­¥é—´éš”
4. å¯ç”¨äº‘åŒæ­¥åŠŸèƒ½

## é¡¹ç›®ç»“æ„

```
qt_ecg/
â”œâ”€â”€ CMakeLists.txt          # CMakeæ„å»ºé…ç½®
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ resources/
â”‚   â””â”€â”€ resources.qrc       # Qtèµ„æºæ–‡ä»¶
â””â”€â”€ src/
    â”œâ”€â”€ main.cpp            # ç¨‹åºå…¥å£
    â”œâ”€â”€ mainwindow.h/cpp    # ä¸»çª—å£
    â”œâ”€â”€ mqttclient.h/cpp    # MQTTå®¢æˆ·ç«¯
    â”œâ”€â”€ datamanager.h/cpp   # æ•°æ®ç®¡ç†å™¨
    â”œâ”€â”€ alarmmanager.h/cpp  # æŠ¥è­¦ç®¡ç†å™¨
    â”œâ”€â”€ cloudsyncer.h/cpp   # äº‘åŒæ­¥å™¨
    â”œâ”€â”€ ecgchartwidget.h/cpp    # å¿ƒç”µå›¾ç»„ä»¶
    â”œâ”€â”€ vitalschartwidget.h/cpp # ç”Ÿå‘½ä½“å¾å›¾è¡¨
    â”œâ”€â”€ historydialog.h/cpp     # å†å²æŸ¥è¯¢å¯¹è¯æ¡†
    â”œâ”€â”€ settingsdialog.h/cpp    # è®¾ç½®å¯¹è¯æ¡†
    â””â”€â”€ vitaldata.h             # æ•°æ®ç»“æ„å®šä¹‰
```

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueã€‚
